{% extends "base.twig" %}

{% block title %}{{ player_name }} - {{ site_name }}{% endblock %}

{% block content %}
<div class="player-profile">
    <div class="container">
        <div id="player-identifier" data-name="{{ player_name }}"></div>

        <!-- Loading State -->
        <div id="player-loading" class="player-loading">
            <div class="spinner"></div>
            <span>Loading player profile...</span>
        </div>

        <!-- Error State -->
        <div id="player-error" class="player-error" style="display: none;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M15 9l-6 6M9 9l6 6"/>
            </svg>
            <h2>Player Not Found</h2>
            <p>Could not find a player named "{{ player_name }}".</p>
            <a href="/leaderboard" class="btn btn-primary" style="margin-top: var(--space-lg);">Back to Leaderboard</a>
        </div>

        <!-- Player Content -->
        <div id="player-content" style="display: none;">
            <!-- Header -->
            <div class="player-header">
                <div class="player-avatar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                </div>
                <div class="player-info">
                    <div class="player-name-row">
                        <h1 class="player-name" id="player-name">{{ player_name }}</h1>
                        <span class="player-rank-badge" id="player-rank">Unranked</span>
                    </div>
                    <div class="player-badges">
                        <div class="player-badge honor-badge" id="player-honor-badge">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                            </svg>
                            <span class="badge-label">Honor</span>
                            <span class="badge-value" id="player-honor">0</span>
                        </div>
                        <div class="player-badge ap-badge" id="player-ap-badge">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                            </svg>
                            <span class="badge-label">Arena Points</span>
                            <span class="badge-value" id="player-ap">0</span>
                        </div>
                    </div>
                    <div class="player-meta">
                        <span id="player-joined"></span>
                        <span id="player-last-seen"></span>
                    </div>
                </div>
            </div>

            <!-- PvP Stats -->
            <h3 class="stats-section-title">PvP Statistics</h3>
            <div class="player-stats-grid">
                <div class="player-stat-card primary">
                    <span class="stat-value" id="stat-wins">0</span>
                    <span class="stat-label">Wins</span>
                </div>
                <div class="player-stat-card">
                    <span class="stat-value" id="stat-pvp-kills">0</span>
                    <span class="stat-label">PvP Kills</span>
                </div>
                <div class="player-stat-card">
                    <span class="stat-value" id="stat-pvp-deaths">0</span>
                    <span class="stat-label">PvP Deaths</span>
                </div>
                <div class="player-stat-card highlight">
                    <span class="stat-value" id="stat-pvp-kd">0.00</span>
                    <span class="stat-label">PvP K/D</span>
                </div>
                <div class="player-stat-card">
                    <span class="stat-value" id="stat-games">0</span>
                    <span class="stat-label">Games</span>
                </div>
                <div class="player-stat-card highlight">
                    <span class="stat-value" id="stat-winrate">0.0%</span>
                    <span class="stat-label">Win Rate</span>
                </div>
            </div>

            <!-- PvE Stats -->
            <h3 class="stats-section-title pve-section">PvE Statistics</h3>
            <div class="player-stats-grid pve-stats-grid">
                <div class="player-stat-card pve-stat">
                    <span class="stat-value" id="stat-pve-kills">0</span>
                    <span class="stat-label">PvE Kills</span>
                </div>
                <div class="player-stat-card pve-stat">
                    <span class="stat-value" id="stat-pve-deaths">0</span>
                    <span class="stat-label">PvE Deaths</span>
                </div>
                <div class="player-stat-card pve-stat highlight">
                    <span class="stat-value" id="stat-pve-kd">0.00</span>
                    <span class="stat-label">PvE K/D</span>
                </div>
            </div>

            <!-- Kit Stats -->
            <div class="player-kit-stats">
                <h2 class="section-heading">Kit Statistics</h2>
                <div class="kit-stats-table-wrapper" id="kit-stats-container">
                    <div class="no-data-message"><p>No kit statistics yet.</p></div>
                </div>
            </div>

            <!-- Arena Stats -->
            <div class="player-arena-stats">
                <h2 class="section-heading">Arena Statistics</h2>
                <div class="arena-stats-list" id="arena-stats-list">
                    <div class="no-data-message"><p>No arena statistics yet.</p></div>
                </div>
            </div>

            <!-- Season History -->
            <div class="player-season-history">
                <h2 class="section-heading">Season History</h2>
                <div class="season-history-list" id="season-history-list">
                    <div class="no-data-message"><p>No season participation yet.</p></div>
                </div>
            </div>

            <!-- Recent Matches -->
            <div class="player-recent-matches">
                <h2 class="section-heading">Recent Matches</h2>
                <div class="recent-matches-list" id="recent-matches-list">
                    <div class="no-data-message"><p>No matches played yet.</p></div>
                </div>
            </div>

            <!-- Back Link -->
            <div class="player-back">
                <a href="/leaderboard" class="back-link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    Back to Leaderboard
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/assets/js/main.js"></script>
<script src="/assets/js/player.js"></script>
{% endblock %}
